"use strict";function _interopDefault(i){return i&&"object"==typeof i&&"default"in i?i.default:i}var videojs=_interopDefault(require("video.js")),version="0.0.4";const registerPlugin=videojs.registerPlugin||videojs.plugin,dom=videojs.dom||videojs;let startTime,endTime;class BrightcoveTracker{constructor({player:i,session:t,destination:e,video:s,videoName:o,videoDuration:r,source:a,domain:n,account:d,startTimeMs:c}){const h=this;this.player=i,this.session=t,this.destination=e,this.video=s,this.videoName=o,this.videoDuration=r,this.source=a,this.domain=n,this.account=d,this.startTimeMs=c,this.sendTracking=this.sendTracking.bind(this),this.player.on("loadstart",(function(i){startTime=Date.now()})),this.player.on("loadedmetadata",(function(i){endTime=Date.now(),h.startTimeMs=endTime-startTime,h.videoDuration=h.player.duration(),h.sendTracking()}))}setVideoTracker({session:i=this.session,destination:t=this.destination,video:e=this.video,videoName:s=this.videoName,videoDuration:o=this.videoDuration,source:r=this.source,domain:a=this.domain,account:n=this.account,startTimeMs:d=this.startTimeMs}){this.session=i,this.destination=t,this.video=e,this.videoName=s,this.videoDuration=o,this.source=r,this.domain=a,this.account=n,this.startTimeMs=d}sendTracking(){const i=`https://metrics.brightcove.com/tracker?event=video_view&session=${this.session}&destination=${this.destination}&video=${this.video}&video_name=${this.videoName}&video_duration=${this.videoDuration}&time=${Date.now()}&source=${this.source}&domain=${this.domain}&account=${this.account}&start_time_ms=${this.startTimeMs}`,t=dom.createEl("img",{className:"vcs-bctr"});t.src=i,this.player.el().appendChild(t)}}function brightcoveTracker(i){this.ready(()=>{this.bcTracker=new BrightcoveTracker({...i,player:this})})}registerPlugin("brightcoveTracker",brightcoveTracker),brightcoveTracker.version=version,module.exports=brightcoveTracker;